\chapter{Introducció a la geometria diferencial}\label{cap:intro}

% {\color{red} El que haurem de fer per a que tot tingui sentit un cop estigui acabat és assegurar-nos que anomenem $x$ a les coordenades normals i $z$ a les coordenades de la carta. DE FET EL QUE TENIM AL CAPíTOL DE NASH ÉS $z$ per l'espai ambient i $x$ per la varietat.}

% {\color{red} ÉS MOLT IMPORTANT QUE DESPRÉS MIREM LA PÀGINA 24 DEL LEE, ON DEFINEIX TAMBÉ VARIETATS AMB FRONTERA}

\section{Introducció al capítol}
L'objectiu d'aquest capítol serà oferir els fonaments matemàtics necessaris per a entendre i justificar els resultats que es mostraran en els capítols posteriors, alhora que volem motivar l'interès d'aquests. Així, es definiran els conceptes i objectes matemàtics bàsics amb els quals treballarem, veurem algunes de les seves propietats i enunciarem i demostrarem alguns teoremes que seran clau en el treball que segueix.

Voldrem estudiar, al llarg d'aquest capítol, els conceptes de varietat topològica, varietat diferenciable i varietat Riemanniana. A un nivell intuïtiu, es tractarà d'espais topològics que es poden veure localment com espais reals $\mathbb R^n$, sobre els quals es pot fer càlcul infinitesimal i que es poden dotar de diferents mètriques. Prendrem especial atenció a la manera en què aquests espais es poden encabir (en anglès, \textit{embed}) en altres varietats i espais ambients. Si bé és generalment fàcil entendre i visualitzar aquests espais quan es consideren encabits en un espai $\mathbb R^n$, com el cas de les superfícies regulars en $\mathbb R^3$, cal notar que les varietats topològiques no requereixen aquest espai ambient per a la seva definició i estudi, sinó que en són independents. Aquest fet és molt rellevant, tot i que no el veurem aquí, en una de les aplicacions més interessants de la geometria diferencial, la teoria de la relativitat general, on l'espai-temps es modela com una varietat diferenciable de dimensió 4 i on no hi ha motiu per introduir cap espai ambient en el sentit clàssic.

Si bé seguirem la línia general d'estudi en molts llibres de referència, centrant-nos en funcions i aplicacions de regularitat $C^\infty$, més endavant ens caldrà treballar amb regularitats més baixes. Per aquest motiu, del primer que ens ocuparem serà de definir les funcions i aplicacions de classe $C^k$ i les normes associades. Això serà rellevant pel fet que també es pot definir la classe de regularitat d'una varietat diferenciable en un punt, i direm que una varietat és suau (en anglès, \textit{smooth}) quan és de classe $C^\infty$. La noció de suavitat no pot ser una propietat purament topològica, ja que no és preservada per homeomorfismes. L'exemple més evident és el d'un cercle i un quadrat, que són homeomorfs en $\mathbb R^2$, però el cercle és suau mentre que el quadrat no ho és. 

La suavitat de les varietats diferenciables serà clau per a desenvolupar eines potents en geometria diferencial, com veurem amb l'existència de particions de la unitat i el teorema de Whitney. Ara bé, veurem que això comporta un grau afegit de rigidesa en les propietats de les varietats Riemannianes pel que fa a la seva relació amb els encabiments (en anglès, \textit{embeddings}). L'última part d'aquest capítol serà dedicada a un exemple d'això mateix: demostrar que no existeix cap encabiment  $C^\infty$ del tor pla en $\mathbb R^3$ tal que preservi les distàncies entre els seus punts. Veurem, de fet, que el motiu principal d'aquesta impossibilitat es relaciona amb el concepte de curvatura gaussiana, que només es pot definir per a superfícies immerses en $\mathbb R^3$ de regularitat $C^2$ o superior. 

Les cites principals en aquest capítol seran \cite{lee2013} i \cite{warner1983}, pel que fa a varietats suaus, i \cite{chavel2006}, pel que fa a varietats Riemannianes.

\section{Classes de regularitat}
Comencem amb la definició estàndard de classes de regularitat de funcions i aplicacions.
\begin{defi}
    Siguin $U\subseteq\mathbb R^n$ un conjunt obert i $f:U\to\mathbb R$ una funció real contínua.
    Diem que $f$ és \textbf{ $k$-vegades derivable contínuament}, o \textbf{de classe $C^k(U)$}, amb $k\in\mathbb N_0$, si totes les derivades parcials d'ordre $k$, \begin{equation*}
        \frac{\partial^k f}{\partial (x^1)^{\alpha_1}\cdots\partial (x^n)^{\alpha_n}}\quad\text{tal que }\sum_{i=1}^n\alpha_i = k,
    \end{equation*} existeixen i són contínues en $U$.

    Si $g:U\to\mathbb R^m$ és una aplicació contínua, diem que $g$ és \textbf{ $k$-vegades derivable contínuament}, o \textbf{de classe $C^k(U)$}, si totes les seves components $g_i:U\to\mathbb R$ són $k$-vegades derivables contínuament.
\end{defi}
\begin{nota}
    No indicarem el domini en què una aplicació és de classe $C^k$ quan el domini sigui clar pel context.
\end{nota}

\begin{obss}
\end{obss}
\begin{itemize}
    \item Una aplicació $f$ és $0$ vegades derivable contínuament si i només si $f$ és contínua. 
    \item Si $f$ és $k$ vegades derivable contínuament, aleshores també és $j$ vegades derivable contínuament per $0\le j\le k$.
\end{itemize}

\begin{defi}
    Direm que una aplicació és \textbf{suau} o \textbf{de classe $C^\infty$} si és infinitament derivable, és a dir, si és $k$-vegades derivable contínuament per a tot $k\in\mathbb N_0$.
\end{defi}

\begin{defi}
    
    Siguin $U\subseteq \mathbb R^n$ un obert i $f:U\to\mathbb R$ una funció de classe $C^k(U)$. Definim la \textbf{norma $\|\cdot\|_{C^k(U)}$} de $f$ com

    \begin{equation*}
        \|f\|_{C^k(U)} := \sum_{|\alpha| \leq k} \sup_{x\in U} \left| \partial^\alpha f(x) \right|.
    \end{equation*}
    on $\alpha = (\alpha_1, \dots, \alpha_n)$, $|\alpha| = \alpha_1 + \dots + \alpha_n$, i
    \[
    \partial^\alpha f(x) := \frac{\partial^{|\alpha|} f(x)}{\partial (x^1)^{\alpha_1}\cdots\partial (x^n)^{\alpha_n}}.
    \]

    Per una aplicació $g:U\to\mathbb{R}^m$ de classe $C^k(U)$, definim la \textbf{norma $\|\cdot\|_{C^k(U)}$} de $g$ com
    \begin{equation*}
        \|g\|_{C^k(U)} := \sum_{|\alpha| \leq k} \sup_{x\in U} \left\| \partial^\alpha g(x) \right\|.
    \end{equation*}    
\end{defi}

\section{Varietats topològiques i diferenciables}
\begin{defi} 
    Sigui $M$ un espai topològic. Diem que $M$ és una \textbf{varietat topològica de dimensió $n$} si es compleixen les propietats següents:
    \begin{itemize}
        \item $M$ és \underline{Hausdorff}, és a dir, si per a cada $p,q\in M$ amb $p\neq q$ existeixen entorns oberts $U\subseteq M$ i $V\subseteq M$ de $p$ i $q$ respectivament tals que $U\cap V = \emptyset$,
        \item $M$ verifica el \underline{segon axioma de numerabilitat}, és a dir, existeix una base numerable de la topologia de $M$,
        \item $M$ és \underline{localment homeomorf a $\mathbb R^n$}, és a dir, per a cada $p\in M$ existeix un entorn obert $U\subseteq M$ de $p$ que és homeomorf a un obert de $\mathbb R^n$.
    \end{itemize}
\end{defi}

Per tal de poder descriure localment els punts de les varietats i de poder operar amb ells, és necessari introduir el concepte de carta coordenada. 

\begin{defi}
    Sigui $M$ una varietat topològica de dimensió $n$. Diem que un parell $(U,\varphi)$ és una \textbf{carta coordenada} o un \textbf{sistema de coordenades de $M$} si $U$ és un obert de $M$ i $\varphi:U\to\hat U$ és un homeomorfisme amb un obert $\hat U\subseteq\mathbb R^n$. Anomenem $U$ el \textbf{domini de la carta} i $\varphi$ l'\textbf{aplicació coordenada}. Donat un punt $p\in U$, anomenem \textbf{coordenades de $p$} respecte de la carta $(U,\varphi)$ als components de $\varphi(p)$ en la base canònica de $\mathbb R^n$.
\end{defi}
\begin{nota}
    Sovint anomenarem carta coordenada o simplement carta a l'aplicació coordenada $\varphi$.
\end{nota}

\begin{obs}
    De la definició de carta coordenada, observem que no tota varietat topològica $M$ es pot descriure globalment amb una única carta coordenada. Per exemple, si $M$ és homeomorf al cercle $\mathbb S^1$ amb la topologia induïda per $\mathbb R^2$, no es pot trobar cap aplicació $\varphi:M\to\mathbb R$ que sigui un homeomorfisme amb un obert de $\mathbb R$, ja que $\mathbb S^1$ és compacte.
\end{obs}

\begin{defi}
    Sigui $M$ una varietat topològica de dimensió $n$. Anomenem \textbf{estructura diferenciable de classe $C^k$} en $M$ una col·lecció $\mathcal F:=\set{(U_\alpha,\varphi_\alpha)}$ de cartes coordenades de $M$ que compleixen les propietats següents:
    \begin{itemize}
        \item $\bigcup_{\alpha\in A} U_\alpha = M$,
        \item Si $U_\alpha\cap U_\beta\neq\emptyset$, aleshores $\varphi_\beta\circ\varphi_\alpha^{-1}$ és $C^k$.
        \item $\mathcal F$ és maximal respecte de la propietat anterior, és a dir, si $\mathcal G$ és una altra estructura diferenciable de classe $C^k$ en $M$ i $\mathcal F\subseteq\mathcal G$, aleshores $\mathcal F = \mathcal G$.
    \end{itemize}
\end{defi}

\begin{defi}
    Sigui $M$ una varietat topològica de dimensió $n$. Diem que $(M, \mathcal F)$ és una \textbf{varietat diferenciable de dimensió $n$ i classe $C^k$} si $\mathcal F$ és una estructura diferenciable de classe $C^k$ en $M$.
\end{defi}

\begin{nota}
    Sovint ens referirem a $M$ com a varietat diferenciable, sense especificar-ne l'estructura diferenciable. Diem que la varietat diferenciable és suau si és de classe $C^\infty$.
\end{nota}

\begin{defi}
    Sigui $M$ una varietat diferenciable suau, $U\subseteq M$ un obert i $f:U\to\mathbb R$ una funció real. Diem que $f$ és \textbf{de classe $C^k$ en $U$} si $f\circ\varphi^{-1}$ és de classe $C^k$ per tota aplicació coordenada $\varphi$ de $M$.

    Una aplicació $\psi:M\to N$ és de classe $C^k(M,N)$ si per qualsevol $p\in M$ existeixen cartes $(U,\phi)$ al voltant de $p$ i $(V,\xi)$ al voltant de $\psi(p)$ tals que $\xi\circ\psi\circ\phi^{-1}$ és de classe $C^k$.
\end{defi}

\begin{defi}
    Siguin $M$ i $N$ varietats diferenciables de classe $C^k$. Diem que una aplicació $\psi:M\to N$ és un \textbf{difeomorfisme de classe $C^k$} si és bijectiva, de classe $C^k(M,N)$ i la seva inversa és de classe $C^k(N,M)$.
\end{defi}

\subsection{Particions de la unitat}
A continuació veurem algunes propietats de les varietats diferenciables que es desprenen del fet que verifiquen el segon axioma de numerabilitat. En aquesta subsecció ens centrarem en varietats diferenciables suaus, per tal d'obtenir el potent teorema de l'existència de particions de la unitat, que serà una eina essencial pel capítol \ref{chap:capitol_nash}.

\begin{defi}
    Sigui $M$ una varietat diferenciable. Anomenem \textbf{recobriment de $W\subseteq M$} a una col·lecció $\set{U_\alpha}$ de subconjunts de $M$ tals que $W = \bigcup_{\alpha\in A} U_\alpha$. Diem que el recobriment és un \textbf{recobriment per oberts} si tots els $U_\alpha$ són oberts, i un \textbf{recobriment per tancats} si tots els $U_\alpha$ són tancats.

    Donat un recobriment $\set{U_\alpha}$ de $W\subseteq M$, diem que $\set{V_\beta}$ n'és un \textbf{refinament} si per tot $\beta$ existeix un $\alpha$ tal que $V_\beta\subseteq U_\alpha$ i $\bigcup_{\beta\in B} V_\beta = \bigcup_{\alpha\in A} U_\alpha$.

    Diem que un recobriment $\set{U_\alpha}$ de $W\subseteq M$ és \textbf{localment finit} si per a cada $p\in W$ existeix un entorn $V$ de $p$ en $M$ tal que $V\cap U_\alpha = \emptyset$ per a tot $\alpha$ excepte un nombre finit. 
    
    Diem que una varietat diferenciable és \textbf{paracompacta} si qualsevol recobriment per oberts té un refinament localment finit.
\end{defi}

\begin{defi}
    Sigui $M$ una varietat diferenciable suau. Una \textbf{partició de la unitat en $M$} és una col·lecció $\set{\varphi_i}_{i\in I}$ de funcions reals de classe $C^\infty(M)$ tals que:
    \begin{itemize}
        \item $0\leq\varphi_i(p)\leq 1$ per a tot $i\in I$ i $p\in M$,
        \item $\sum_{i\in I}\varphi_i(p) = 1$ per a tot $p\in M$,
        \item El conjunt de suports $\set{\text{supp}(\varphi_i)}$ és localment finit, on el \textbf{suport} d'una funció és l'adherència del conjunt de punts del seu domini on la funció no és $0$.
    \end{itemize}
    Diem que la partició de la unitat és \textbf{subordinada al recobriment} $\set{U_\alpha}$ si per a cada $i\in I$ existeix un $\alpha$ tal que $\text{supp}(\varphi_i)\subseteq U_\alpha$.
\end{defi}

\begin{lema}\label{lema:paracompact}
    Sigui $X$ un espai topològic localment compacte (és a dir, tal que tot punt de $X$ té un entorn compacte), Hausdorff i tal que verifica el segon axioma de numerabilitat. Aleshores $X$ és paracompacte, i cada recobriment per oberts de $X$ té un refinament numerable i localment finit per oberts d'adherència compacta.
\end{lema}
{\color{green!50!black} 
    \textit{Prova.} 
    Com $X$ verifica el segon axioma de numerabilitat, existeix una base numerable de la topologia de $X$. Com $X$ és localment compacte, podem prendre d'aquesta base numerable els conjunts amb adherència compacta, i pel fet que $X$ és Hausdorff, aquesta col·lecció de subconjunts serà una base en si mateixa. Sigui $\set{U_i}_{i\in I}$ aquesta base.

    Sigui $G_1 := U_1$, i suposem que hem definit un cert $G_k=U_1\cup\cdots\cup U_{j_k}$. Sigui $j_{k+1}$ l'enter més petit tal que sigui estrictament més gran que $j_k$ i tal que 
    \begin{equation*}
        \overline{G_k}\subseteq \bigcup_{i = 1}^{j_{k+1}} U_i,
    \end{equation*}
    i definim 
    \begin{equation*}
        G_{k+1} := G_k\cup U_{j_{k+1}}.
    \end{equation*}
    D'aquesta manera, obtenim inductivament una successió de conjunts oberts $G_k$ tals que per tot $k$ tenim que
    \begin{enumerate}
        \item $\overline{G_k}$ és compacte,
        \item $\overline{G_k}\subseteq G_{k+1}$,
        \item $X = \bigcup_{k\in\mathbb N} G_k$.
    \end{enumerate}
    Ara sigui $\set{U_\alpha:\alpha\in A}$ un recobriment per oberts qualsevol. El conjunt $\overline{G_{k+1}}\setminus G_{k-1}$ és compacte i contingut en l'obert $G_{k+1}\setminus \overline{G_{k-2}}$. Per tot $i\ge3$, podem escollir un subrecobriment finit del recobriment per oberts $U_\alpha\cap(G_{k+1}\setminus \overline{G_{k-2}})$ de $\overline{G_k}\setminus G_{k-1}$, i es pot escollir un subrecobriment finit del recobriment per oberts $U_\alpha\cap G_3$ del conjunt compacte $\overline{G_2}$. Aquesta nova col·lecció serà un refinament numerable i localment finit per oberts d'adherència compacta del recobriment $\set{U_\alpha}$, com volíem veure. \qed
}
\begin{lema}\label{lema:bump}
    Existeix una funció real no negativa $\varphi:\mathbb R^n\to\mathbb R$ de classe $C^\infty$ que és igual a 1 en $[-1,1]^n$ i $0$ en el complementari de $(-2,2)^n$.
\end{lema}

{\color{green!50!black} 
    \textit{Prova.} 
    Sigui
    \begin{equation*}
        f(t) = \begin{cases}
            e^{-1/t} & \text{si } t > 0, \\
            0 & \text{si } t\le 0.
        \end{cases}
    \end{equation*}
    Observem que $f$ és clarament $C^\infty$ en $t<0$ i $t>0$. En el punt $t=0$, tenim que
    \begin{equation*}
        \lim_{t\to0^+} f(t) = \lim_{t\to0^+} e^{-1/t} = \lim_{x\to\infty} \frac{1}{e^x} = 0,
    \end{equation*}
    de manera que $f$ és contínua a $t=0$. Per veure que totes les derivades de $f$ existeixen i són iguals a $0$ en $t=0$, podem veure que totes les derivades de $\phi(t) = e^{-1/t}$ són el producte de $\phi(t)$ per un polinomi de $1/t$. En efecte, si $\phi^{(n)}(t) = \phi(t)P_n(1/t)$, aleshores $\phi^{(n+1)}(t) = \frac{1}{t^2}(\phi(t)P_n(1/t) - \phi(t)P_n'(1/t)) := \phi(t)P_{n+1}(1/t)$, on $P_{n+1}(1/t)$ és un nou polinomi en $1/t$. Com $\phi(t)$ decreix exponencialment quan $t\to0^+$ i tots els polinomis $P_n(1/t)$ creixen polinomialment quan $t\to0^+$, tenim que totes les derivades de $f$ existeixen i són iguals a $0$ en $t=0$.

    Així, podem definir
    \begin{equation*}
        g(t) = \frac{f(t)}{f(t) + f(1-t)},
    \end{equation*}
    que és $C^\infty$ per ser una composició de funcions $C^\infty$, i on el denominador no s'anul·la mai. Observem que $g(t)$ val 1 per $t\ge1$ i 0 per $t\le0$.

    A continuació, definim la funció $h$ com
    \begin{equation*}
        h(t) = g(t+2)g(2-t),
    \end{equation*}
    que és $C^\infty$ per ser producte de funcions $C^\infty$. Observem que $h(t)$ és la funció que buscàvem pel cas $n=1$. Per $n$ arbitrari, definim 
    \begin{equation}\label{eq:phi}
        \varphi = (h\circ x_1)\cdots(h\circ x_n),
    \end{equation}
    que té exactament les propietats que volíem.
    \qed
}

\begin{teo}[\textbf{Existència de particions de la unitat}]

    Sigui $M$ una varietat diferenciable de classe $C^\infty$ i $\set{U_\alpha:\alpha\in A}$ un recobriment per oberts de $M$. Aleshores, existeix una partició de la unitat numerable $\set{\varphi_i:i\in I}$ subordinada al recobriment $\set{U_\alpha}$ amb suports $\set{\text{supp}\varphi_i}$ compactes. A més, si no exigim que els suports siguin compactes, existeix una partició de la unitat $\set{\varphi_\alpha}$ subordinada al recobriment $\set{U_\alpha}$ amb $\text{supp}\varphi_\alpha \subseteq U_\alpha$ per a tot $\alpha\in A$, amb com a molt un conjunt numerable dels $\varphi_\alpha$ no idènticament zero.
\end{teo}

{\color{green!50!black} 
    \textit{Prova.} 
    Sigui $\set{G_i}$ un recobriment com el definit a la demostració del lema \ref{lema:paracompact} i definim $G_0=\emptyset$. Per cada punt $p\in M$, sigui $i_p$ l'enter més gran tal que $p\in M\setminus \overline{G_{i_p}}$. Escollim un $\alpha_p$ tal que $p\in U_{\alpha_p}$ i sigui $(V,\tau)$ una carta coordenada centrada en $p$ (és a dir, tal que $\tau(p)=0$) i tal que $V\subseteq U_{\alpha_p}\cap(G_{i_p+2}\setminus \overline{G_{i_p}})$ i $[-2,2]^n\subseteq\tau(V)$.

    Definim 
    \begin{equation*}
        \psi_p = \begin{cases}
            \varphi\circ\tau & \text{a } V, \\
            0 & \text{fora de } V.
        \end{cases}
    \end{equation*}
    on $\varphi$ és tal com l'hem definit a l'equació \eqref{eq:phi}. Aleshores, $\psi_p$ és una funció de classe $C^\infty$ en $M$ que val $1$ en un entorn $W_p$ de $p$ i té suport compacte en $V\subseteq U_{\alpha_p}\cap(G_{i_p+2}\setminus \overline{G_{i_p}})$. Per cada $i\ge1$, escollim un nombre finit de punts $p\in M$ tals que els respectius $W_p$ siguin un recobriment de $\overline{G_i}\setminus G_{i-1}$. Podem escollir un ordre qualsevol per les funcions corresponents $\psi_p$ per obtenir una successió $\set{\psi_j}$, i els seus suports formen una col·lecció localment finita de subconjunts de $M$. Amb això veiem que la funció 
    \begin{equation*}
        \psi = \sum_{j=1}^\infty \psi_j
    \end{equation*}
    és positiva i de classe $C^\infty$ en $M$. Ara, per tot $i=1,2,\dots$ definim 
    \begin{equation*}
        \varphi_i = \frac{\psi_i}{\psi}.
    \end{equation*}
    Les funcions $\varphi_i$ formen una partició de la unitat subordinada al recobriment $\set{U_\alpha}$ amb suports compactes.

    Si definim $\varphi_\alpha$ tals que siguin idènticament zero si cap $\varphi_i$ té suport en $U_\alpha$, i en cas contrari que siguin la suma de totes les $\varphi_i$ que hi tenen suport, aleshores tenim que $\varphi_\alpha$ formen una partició de la unitat subordinada al recobriment $\set{U_\alpha}$ amb com a molt un conjunt numerable dels $\varphi_\alpha$ no idènticament zero.

    Veiem que el suport de cada $\varphi_\alpha$ és contingut en $U_\alpha$, ja que si $\mathcal A$ és una col·lecció localment finita de conjunts tancats, aleshores $\overline{\bigcup_{A\in \mathcal A} A} = \bigcup_{A\in \mathcal A} A$. Ara bé, observem que en aquest cas el suport de $\varphi_\alpha$ no és necessàriament compacte.
    \qed
}
\begin{corol}
    Sigui $G$ un obert d'una varietat diferenciable de classe $C^\infty$ i $A\subseteq G$ un subconjunt tancat. Aleshores, existeix una funció $\varphi:M\to\mathbb R$ de classe $C^\infty$ en $M$ tal que
    \begin{enumerate}
        \item $0\leq\varphi(p)\leq 1$ per a tot $p\in M$,
        \item $\varphi(p) = 1$ per a tot $p\in A$,
        \item $\text{supp}\varphi\subseteq G$.
    \end{enumerate}
\end{corol}
{
\color{green!50!black} \textit{Prova.} 
Existeix una partició de la unitat $\set{\varphi, \psi}$ subordinada al recobriment $\set{G, M\setminus A}$ de $M$ amb $\text{supp}\varphi\subseteq G$ i $\text{supp}\psi\subseteq M\setminus A$. $\varphi$ és, per tant, la funció desitjada. \qed
}

A continuació utilitzarem l'existència de particions de la unitat per a demostrar l'existència d'un tipus diferent de funcions, que utilitzarem per demostrar el teorema de Whitney.

\begin{defi}\label{def:funció_exhauriment}
    Sigui $M$ una varietat diferenciable. Una funció $f:M\to\mathbb R$ és una \textbf{funció d'exhauriment} si és contínua i per qualsevol $c\in\mathbb R$, la preimatge $f^{-1}(-\infty,c]$ és compacta.
\end{defi}

\begin{prop}
    Sigui $M$ una varietat diferenciable suau. Aleshores, existeix una funció d'exhauriment $f:M\to\mathbb R_+$ de classe $C^\infty$.
\end{prop}
{
    \color{green!50!black} \textit{Prova.} 
    Sigui $\set{V_j}_j$ un recobriment numerable per oberts de $M$ per oberts amb adherències compactes, i sigui $\set{\psi_j}_j$ una partició de la unitat suau subordinada a aquest recobriment. Definim la funció
    \begin{equation*}
        f(p) = \sum_{j=1}^\infty j\psi_j(p)
    \end{equation*}
    De la definició de partició de la unitat obtenim que $f$ és positiva, i com és una suma localment finita de funcions $C^\infty$, és de classe $C^\infty$.

    Cal veure que és, efectivament, una funció d'exhauriment. Sigui $c\in\mathbb R$ i $N>c$ un enter. Per $p\not\in\bigcup_{j=1}^N \overline{V_j}$, tenim que $\psi_j(p)=0$ per a tot $1\le j\le N$. Per tant,
    \begin{equation*}
        f(p) = \sum_{j=N+1}^N j\psi_j(p) \ge \sum_{j=N+1}^N N\psi_j(p) =N\sum_{j=1}^N\psi_j(p) = N>c.
    \end{equation*}
    Equivalentment, si $f(p)\le c$, aleshores $p\in\bigcup_{j=1}^N \overline{V_j}$. Per tant, $f^{-1}(-\infty,c]$ és un subconjunt tancat del conjunt compacte $\bigcup_{j=1}^N \overline{V_j}$, i per tant és compacte.
    \qed
}



\subsection{Vectors tangents}
Un vector en $\mathbb R^n$ es pot pensar com un operador lineal sobre funcions reals diferenciables. En concret, donada una funció $f$ diferenciable en un punt $p\in\mathbb R^n$, el vector $v$ assigna a $f$ un valor real que és la derivada direccional de $f$ en la direcció i sentit de $v$ a $p$,
\begin{equation*}
    v(f) = v_1\frac{\partial f}{\partial x^1}\Big|_p + \cdots + v_n\frac{\partial f}{\partial x^n}\Big|_p,
\end{equation*}
amb les propietats de linealitat esperades,
\begin{equation*}
    v(f+g) = v(f) + v(g), 
\end{equation*}
\begin{equation*}
    v(\lambda f) = \lambda v(f),
\end{equation*}
i la propietat de Leibniz,
\begin{equation*}
    v(fg) = v(f)g(p) + f(p)v(g)
\end{equation*}
per qualssevol $f,g\in C^\infty(\mathbb R^n)$ i $\lambda\in\mathbb R$.

És evident que volem un anàleg a aquesta definició que sigui útil en el context de varietats diferenciables, per tal d'aprofitar el fet que aquestes són espais localment similars a $\mathbb R^n$. 

\begin{defi}
    Sigui $p$ un punt d'una varietat diferenciable de dimensió $n$. Un \textbf{vector tangent} a $M$ en $p$ és una aplicació lineal $v_p:C^\infty(M)\to\mathbb R$ que compleix la propietat de linealitat,
    \begin{equation*}
        v_p(\lambda f+\mu g) = \lambda v_p(f) + \mu v_p(g), 
    \end{equation*}
    i la propietat de Leibniz,
    \begin{equation*}
        v_p(fg) = v_p(f)g(p) + f(p)v_p(g).
    \end{equation*}
    Per qualssevol $f,g\in C^\infty(M)$ i $\lambda,\mu\in\mathbb R$.
    Anomenem el conjunt de tots aquests vectors tangents l'\textbf{espai tangent} a $M$ en $p$ i el denotem per $T_pM$.
\end{defi}

En concret, podem construir els següents vectors tangents:
\begin{equation*}
    \frac{\partial}{\partial x^i}\Big|_p(f) := \frac{\partial(f\circ\varphi^{-1})}{\partial x^i}(\varphi(p)),
\end{equation*}
on $(x^1,\dots,x^n)$ són les coordenades canòniques de $\mathbb R^n$ i $(U,\varphi)$ una carta coordenada centrada en $p$. Es pot demostrar que aquests vectors tangents formen una base de $T_pM$, de manera que $T_pM$ un espai vectorial de dimensió $n$. Tractant-lo com a tal, podem definir el seu espai dual.

\begin{defi}
    Sigui $M$ una varietat diferenciable. Per cada punt $p\in M$, definim \textbf{l'espai cotangent} a $p$, $T^*_pM$, com l'espai vectorial dual de $T_pM$,
    \begin{equation*}
        T^*_pM = (T_pM)^*.
    \end{equation*}
\end{defi}






Una eina essencial per treballar amb vectors tangents serà el concepte de \textbf{diferencial} d'una aplicació diferenciable entre varietats.
\begin{defi}
    Siguin $M$ i $N$ varietats diferenciables de classe $C^k$, $F:M\to N$ una aplicació diferenciable de classe $C^l$, $l\le k$, i $p\in M$. Anomenem \textbf{diferencial de $F$ en $p$} l'aplicació
    \begin{equation*}
        dF_p:T_pM\to T_{F(p)}N
    \end{equation*}
    que assigna a cada vector tangent $v\in T_pM$ el vector tangent $dF_p(v)\in T_{F(p)}N$ que compleix
    \begin{equation*}
        dF_p(v)(f) = v(f\circ F),
    \end{equation*}
    per a tota $f\in C^\infty(N)$.
\end{defi}
\begin{defi}
    Diem que una aplicació $F$ és \textbf{no singular} en $p\in M$ si $dF_p$ no és singular, és a dir, si el seu nucli és $\set0$.
\end{defi}
Dualitzant l'aplicació que defineix el diferencial, podem definir el \textit{pullback} d'una funció diferenciable, que serà particularment important per a l'estudi de mètriques Riemannianes.
\begin{defi}
    Siguin $M$ i $N$ varietats diferenciables suaus, $F:M\to N$ una aplicació diferenciable i $p\in M$. Anomenem \textbf{\textit{pullback} puntual de $F$ en $p$} l'aplicació
    \begin{equation*}
        dF_p^*:T_{F(p)}^*N\to T^*_pM 
    \end{equation*}
    obtinguda dualitzant el diferencial $dF_p$.
\end{defi}
Observem que el \textit{pullback} puntual està caracteritzat per la propietat
\begin{equation*}
    dF_p^*(w)(v) = w(dF_p(v)),
\end{equation*}
per a tot $v\in T_pM$ i $w\in T^*_{F(p)}N$.
\begin{obs}
    Sovint anomenem \textit{pushforward} a l'aplicació $dF_p$. Mentre el \textit{pushforward} actua sobre camps vectorials, el \textit{pullback} actua sobre funcions i formes diferencials. En concret, com veurem més endavant, es fa servir per transportar mètriques de $N$ a $M$.
\end{obs}

Una altra eina que necessitarem per descriure la geometria local de les varietats diferenciables és el de \textbf{fibrat tangent}.
\begin{defi}
    Sigui $M$ una varietat diferenciable. El \textbf{fibrat tangent} de $M$ és la unió disjunta dels espais tangents de tots els punts de $M$, 
    \begin{equation*}
        TM = \bigcup_{p\in M} T_pM,
    \end{equation*}
    juntament amb la \textbf{projecció} $\pi:TM\to M$ que a cada vector tangent li assigna el punt de la varietat al qual és tangent,
    \begin{equation*}
        \pi(v) = p,
    \end{equation*}
    on $v\in T_pM$.
\end{defi}
De la mateixa manera, podem definir el \textbf{fibrat cotangent} de $M$ com la unió disjunta dels espais cotangents de tots els punts de $M$,
\begin{equation*}
    T^*M = \bigcup_{p\in M} T^*_pM,
\end{equation*}
junt amb la \textbf{projecció} $\pi:T^*M\to M$ que envia $w\in T^*_pM$ a $p\in M$.

Es pot demostrar, tot i que no ho farem aquí, que tant el fibrat tangent com el fibrat cotangent són varietats diferenciables de dimensió $2n$. La demostració és més tècnica i requereix un cert joc amb les cartes coordenades i les projeccions, però recau en última instància en el simple fet que el fibrat tangent, així com el cotangent, assigna a cada punt de la varietat de dimensió $n$ un espai vectorial de dimensió $n$.

\subsection{Camps vectorials}
\begin{defi}
    Sigui $M$ una varietat diferenciable suau, i $(a,b)$ un interval obert de $\mathbb R$. Una \textbf{corba suau} en $M$ és una aplicació diferenciable $\sigma:(a,b)\to M$. Si es pot estendre a un interval obert $(a-\epsilon,b+\epsilon)$ per algun $\epsilon>0$ escrivim també $\sigma:[a,b]\to M$. Definim el \textbf{vector tangent} a $\sigma$ en $t\in(a,b)$ com

    \begin{equation*}
        \dot{\sigma}_t = d\sigma\left(\frac{d}{dr}\Big|_{t}\right)\in T_{\sigma(t)}M
    \end{equation*}
\end{defi}

\begin{defi}
    Un \textbf{camp vectorial} $X$ \textbf{al llarg d'una corba} $\sigma:[a,b]\to M$ és una aplicació $X:[a,b]\to TM$ que \say{aixeca} $\sigma$, és a dir, tal que $\pi\circ X = \sigma$, on $\pi$ és la projecció del fibrat tangent tal com l'hem definit abans. 

    Un \textbf{camp vectorial} $X$ \textbf{en un conjunt obert} $U\subseteq M$ és una aplicació $X:U\to TM$ que \say{aixeca} $U$, és a dir, tal que $\pi\circ X = \text{id}_U$.
\end{defi}


\subsection{Subvarietats, immersions, encabiments i difeomorfismes}
A continuació, definirem alguns dels conceptes més importants per aquest treball, en particular el concepte d'encabiment. A més, demostrarem el teorema de Whitney, que afirma que tota varietat diferenciable suau $n$-dimensional admet un encabiment suau en un espai euclidià. 
\begin{defi}
    Sigui $\psi:M\to N$ una aplicació diferenciable amb regularitat $C^k$, $k\ge 1$.
    \begin{enumerate}
        \item Diem que $\psi$ és una \textbf{immersió} si $d\psi_p$ és no singular per a tot $p\in M$.
        \item Diem que $\psi$ és un \textbf{encabiment} si és una immersió injectiva i un homeomorfisme sobre la seva imatge.
        \item Diem que $\psi$ és un \textbf{difeomorfisme} $C^r$ si és una injectiva amb inversa diferenciable amb regularitat $C^r$, $r\le k$.
        \item El parell $(M, \psi)$ és una \textbf{subvarietat de $N$} si $\psi$ és una immersió injectiva, i és una \textbf{subvarietat encabida} si és un encabiment.
    \end{enumerate}
\end{defi}

Es pot demostrar la següent proposició:
\begin{prop}\label{prop:encabiment_immersio}
    Sigui $\psi:M\to N$ una immersió injectiva entre varietats $C^k$, amb $k\ge 1$. Si qualsevol de les següents condicions és certa, aleshores $\psi$ és un encabiment:
    \begin{enumerate}
        \item $M$ és compacta.
        \item $\psi$ és un aplicació pròpia, és a dir, la imatge inversa de qualsevol compacte de $N$ és compacta.
        \item $\psi$ és oberta o tancada.
    \end{enumerate}
\end{prop}

En parlar de subvarietats encabides en espais euclidians $\mathbb R^n$, també serà interessant parlar del que anomenarem \textbf{vectors normals}.
\begin{defi}\label{def:espai_normal}
    Sigui $M\subseteq\mathbb R^n$ una subvarietat $m$-dimensional encabida en $\mathbb R^n$. Per tot punt $x\in M$, definim l'\textbf{espai normal} a $M$ en $x$, $N_xM$, com el subespai vectorial de $T_x\mathbb R^n$ ortogonal a $T_xM$ pel producte escalar euclidià.
\end{defi}

Un dels tipus de subvarietats que més ens interessarà seran les subvarietats encabides en $\mathbb R^n$. En concret, posarem particular atenció a $n=3$.

\begin{defi}
    Diem que $S\subseteq\mathbb R^3$ és una \textbf{superfície regular (i simple)} si és la imatge d'un encabiment suau $\psi:T\to\mathbb R^3$ d'una regió elemental $T\subseteq\mathbb R^2$ en $\mathbb R^3$.
\end{defi}

\begin{ex}\label{ex:tor}
    Siguin $R>r>0$. Per $T = [0,1)\times[0,1)\subseteq\mathbb R^2$, sigui $\psi:T\to\mathbb R^3$ l'aplicació
    \begin{equation*}
        \psi(u,v) = \left( (R+r\cos(2\pi v))\cos(2\pi u), (R+r\cos(2\pi v))\sin(2\pi u), r\sin(2\pi v) \right).
    \end{equation*}
    Aleshores, $\psi$ és un encabiment suau i $S = \psi(T)$ és una superfície regular. Aquest és un dels possibles encabiments del \textbf{tor} en $\mathbb R^3$ com a superfície regular.
\end{ex}

\subsubsection{Els teoremes de Whitney}
La possibilitat de prendre varietats diferenciables arbitràries com a subvarietats d'altres espais amb estructura més senzilla, com és el cas de $\mathbb R^n$, pot oferir una major facilitat a l'hora de treballar amb aquestes varietats. Si bé, com hem dit més amunt i hem vist fins ara, les varietats diferenciables suaus no requereixen ser subvarietat de cap espai euclidià, sí és cert que totes elles poden ser subvarietats encabides de $\mathbb R^N$ per a $N$ prou gran.

El teorema de Whitney (o teoremes, degut a les seves diverses formulacions) afirma això mateix, que tota varietat diferenciable suau $n$-dimensional $M$ admet un encabiment suau en $\mathbb R^{2n+1}$. Per demostrar el teorema de Whitney, cal utilitzar el teorema de Sard. No demostrarem aquest darrer teorema, però el farem servir en la demostració del teorema de Whitney.
\begin{nota}
    Sempre que parlem d'encabiments o immersions de varietats en espais $\mathbb R^n$, suposarem que aquests tenen la mètrica euclidiana.
\end{nota}
\begin{defi}
    Sigui $F:M\to N$ una aplicació diferenciable. Diem que $p\in M$ és un \textbf{punt regular} de $F$ si $dF_p$ és exhaustiva. Altrament, diem que és un \textbf{punt crític}. Un punt $c\in N$ és un \textbf{valor regular} de $F$ si tots els punts de la preimatge $F^{-1}(c)$ són regulars.
\end{defi}

\begin{teo}[\textbf{Teorema de Sard}]
    Siguin $M, N$ varietats diferenciables suaus i $F:M\to N$ una aplicació de classe $C^\infty$. Aleshores, la imatge del conjunt de punts crítics és un subconjunt de mesura zero de $N$. En concret, si la dimensió de $M$ és menor que la de $N$, $F(M)$ té mesura zero en $N$.
\end{teo}

\begin{lema}
    Sigui $M\subseteq\mathbb R^N$ una subvarietat suau $n$-dimensional. Per tot $v\in \mathbb R^N\setminus R^{N-1}$, sigui $\pi_v : \mathbb R^N\setminus R^{N-1}\to S^{N-1}$ la projecció amb nucli $\mathbb Rv$, on identifiquem $\mathbb R^{N-1}$ amb el subespai de $\mathbb R^N$ amb la última coordenada nul·la. Si $N>2n+1$, aleshores hi ha un conjunt dens de vectors $v\in \mathbb R^N\setminus R^{N-1}$ tals que $\pi_v|_M$ és una immersió injectiva de $M$ en $\mathbb R^{N-1}$.
\end{lema}
{
    \color{green!50!black} 
    \textit{Prova.}
    Observem les següents equivalències entre propietats:
    \begin{itemize}
        \item $\pi_v|_M$ és injectiva $\iff$ $p-q$ mai és paral·lel a $v$ per a $p,q\in M$ diferents.
        \item $\pi_v|_M$ és una immersió suau $\iff$ $T_pM$ no conté vectors no nuls de $\ker d(\pi_v)_p$ per a $p\in M$.
    \end{itemize}
    Com $\pi_v$ és lineal, el seu diferencial és la mateixa aplicació lineal, de manera que aquesta última condició és equivalent a demanar que $T_pM$ no contingui vectors no nuls paral·lels a $v$.

    Siguin ara
    \begin{align*}
        \Delta_M &= \set{(p,p):p\in M}\subseteq M\times M,\\
        M_0 &= \set{(p,0):p\in M}\subseteq TM,\\
    \end{align*}
    i considerem les aplicacions següents cap a l'espai projectiu real $\mathbb {RP}^{N-1}$:
    \begin{align*}
        \kappa:(M\times M)\setminus\Delta_M&\to\mathbb {RP}^{N-1},\\
        (p,q) &\mapsto [p-q]\\
    \end{align*}
    i
    \begin{align*}
        \tau:(TM)\setminus M_0&\to\mathbb {RP}^{N-1},\\
        (p,w) &\mapsto [w]
    \end{align*}
    On $[v]$ denota la classe d'equivalència del vector $v$ de $\mathbb R^N\setminus\set0$ com a punt de $\mathbb {RP}^{N-1}$.

    Ambdues aplicacions són suaus, ja que són composició d'aplicacions suaus amb la projecció $\mathbb R^N\setminus\set0\to\mathbb {RP}^{N-1}$, i les dues condicions donades al principi de la demostració són equivalents a la condició que $[v]$ no sigui imatge de $\kappa$ ni de $\tau$. Com els dominis d'ambdues aplicacions tenen dimensió $2n<N-1$, pel teorema de Sard, les imatges de $\kappa$ i $\tau$ tenen mesura zero en $\mathbb {RP}^{N-1}$ i, per tant, el conjunt de vectors que pertanyen a les classes d'equivalència que no pertanyen a cap d'aquestes imatges és dens.
    \qed
}

Iterant el procés donat en aquesta demostració, veiem que podem reduir la dimensió de l'espai ambient d'un encabiment a partir d'una sèrie de projeccions sobre subespais d'una dimensió més baixa, fins arribar a un espai de dimensió $2n+1$. Tot i que això només ens ofereix una immersió i no un encabiment, és possible modificar lleugerament el lema per assegurar un encabiment. No detallem aquí de quina manera, però s'acaba reduint a imposar una condició no gaire restrictiva a l'elecció de $v$.

\begin{lema}\label{lema:encabiment_whitney}
    Sigui $M$ una varietat suau $n$-dimensional. Si $M$ admet un encabiment suau propi en algun espai $\mathbb R^N$, aleshores $M$ admet un encabiment suau propi en $\mathbb R^{2n+1}$.
\end{lema}

Al lema anterior, \textbf{propi} tan sols vol dir que l'encabiment és una aplicació pròpia, és a dir, tal que la preimatge de qualsevol compacte és compacta. Hem vist que podem reduir la dimensió de l'espai ambient en què haguem encabit la nostra varietat, però encara queda veure que es pot encabir en algun espai real per acabar la demostració.

\begin{teo}[\textbf{Teorema de Whitney}]\label{teo:whitney}
    Tota varietat diferenciable suau $n$-dimensional admet un encabiment suau en $\mathbb R^{2n+1}$.
\end{teo}
{
    \color{green!50!black} \textit{Prova.}
    Sigui $M$ una varietat diferenciable suau $n$-dimensional. Com hem dit, només cal veure que $M$ admet un encabiment en algun espai $\mathbb R^N$ amb $N$ prou gran.

    Suposem primer que $M$ és compacta. Aquest és el cas més senzill. Sigui $\set{B_1,\dots,B_m}$ un recobriment finit per boles coordenades, de manera que per cada $i$ existeix un domini de coordenades $B_i'\supseteq \overline{B_i}$ i una carta coordenada $\varphi_i:B_i'\to\mathbb R^n$ que és homeomorfisme de $\overline{B_i}$ amb un compacte de $\mathbb R^n$.

    Sigui $\set{\rho_i}_i$ un conjunt de funcions de relleu, tals que $\rho_i$ val 1 en $\overline{B_i}$ i 0 en $\mathbb R^n\setminus B_i'$. L'existència d'aquests conjunts de funcions de relleu és conseqüència de l'existència de funcions de relleu en espais euclidians, com hem vist al lema \ref{lema:bump}. Definim una aplicació suau

    \begin{align*}
        F:M&\to\mathbb R^{nm + m},\\
        p&\mapsto \left(\rho_1(p)\varphi_1(p),\dots,\rho_m(p)\varphi_m(p), \rho_1(p),\dots,\rho_m(p)\right)
    \end{align*}
    on $\rho_i\varphi_i$ és zero fora del suport de $\rho_i$. Com hem suposat que $M$ és compacte, només cal veure que $F$ és una immersió injectiva suau, per la proposició \ref{prop:encabiment_immersio}.

    Vegem que $F$ és injectiva. Suposem $F(p) = F(q)$ per a $p,q\in M$. Com els $B_i$ són un recobriment de $M$, existeix un $i$ tal que $p\in B_i'$, i $\rho_i(p)=1$. Com $F(p) = F(q)$, tenim que $\rho_i(p) = \rho_i(q)$ i $\rho_i\varphi_i(p) = \rho_i\varphi_i(q)$. Com $\rho_i(p)=1$, tenim que $\varphi_i(p) = \varphi_i(q)$. Com $\varphi_i$ és un homeomorfisme, tenim que $p=q$. Així, $F$ és injectiva.

    Vegem que $F$ és una immersió suau. Sigui $p\in M$ i $p\in B_i$. Com $\rho_i\equiv1$ en un entorn de $p$, tenim $d(\rho_i\varphi_i)_p = d\varphi_p$, que és injectiva. Per tant, $dF_p$ és injectiva, i $F$ és una immersió suau.
    Amb això acabem el cas de $M$ compacte.

    Suposem ara que $M$ no és compacte. Sigui $f:M\to \mathbb R$ una funció d'exhauriment suau, tal com les hem definit a la definició \ref{def:funció_exhauriment}. Pel teorema de Sard, per tot enter no negatiu $i$ existeixen valors regulars $a_i,b_i$ de $f$ tals que $i<a_i<b_i<i+1$. Definim els subconjunts de $M$
    \begin{align*}
        D_0 &= f^{-1}(-\infty,1],\quad E_0 = f^{-1}(-\infty,a_1],\\
        D_i &= f^{-1}(i,i+1],\quad E_i = f^{-1}(b_{i-1},a_{i+1}],\\
    \end{align*}
    Cada $E_i$ és un domini regular compacte, és a dir, un subconjunt compacte de $M$ tal que la frontera $\partial E$ és una subvarietat suau de dimensió $n-1$, ja que els seus límits són preimatge de valors regulars. Vegeu la definició \ref{def:varietat_topologica_amb_frontera} i la notació \ref{nota:frontier_and_interior} per la definició de frontera i interior. Tenim que $D_i\subseteq int(E_i)$, $M=\bigcup_i D_i$ i $E_i\cap E_j = \emptyset$ si $j\not\in\set{i-1,i,i+1}$. 

    Vegem que per tot $i$ hi ha un encabiment suau de $E_i$ en algun espai $\mathbb R^N$. Per tot $i$, sigui $\rho_i:M\to \mathbb R$ una funció de relleu que val 1 en un entorn de $D_i$ i té suport en $int(E_i)$. Definim
    \begin{align*}
        F:M&\to\mathbb R^{2n + 1}\times\mathbb R^{2n + 1}\times\mathbb R.\\
        p&\mapsto \left(    \sum_{i\text{ parell}}    \rho_i(p)\varphi_i(p), \sum_{i\text{ senar}}    \rho_i(p)\varphi_i(p), f(p)\right)
    \end{align*}
    Clarament, $F$ és suau perquè en cada punt $p$ només un terme de cada sumatori és diferent de zero.
    Per veure que $F$ és injectiva, notem que si $F(p)=F(q)$, aleshores $p\in D_j$ i com $f(p)=f(q)$, $q\in D_j$. Per un argument com el del cas compacte, tenim que $p=q$.
    Per veure que $F$ és una immersió, sigui $p\in M$ i $p\in D_j$. Aleshores $\rho_j\equiv1$ en un entorn de $p$. Si $j$ és senar, aleshores tenim que per tot $q$ en aquest entorn de $p$, 
    \begin{equation*}
        F(p) = (\varphi_j(p),\dots,\dots)
    \end{equation*}
    de manera que $dF_p$ és injectiva perquè $\varphi_j$ és injectiva. Si $j$ és parell, un argument anàleg ens diu que $dF_p$ és injectiva. 
    %{\color{blue}MIRAR PER QUÈ AIXÒ ÉS VERITAT ABANS D'ENTREGAR}

    Amb això, hem vist que tota varietat diferenciable suau $n$-dimensional admet un encabiment en $\mathbb R^{N}$. Pel lema \ref{lema:encabiment_whitney}, tenim que $M$ admet un encabiment en $\mathbb R^{2n+1}$.
    \qed
}





\subsection{Geometria Riemanniana}
Per tal de poder parlar de geometria en varietats diferenciables arbitràries, necessitem introduir el concepte de mètrica Riemanniana. Abans, però, recordem la definició de producte intern en espais vectorials reals.
\begin{defi}
    Un \textbf{producte intern} en un espai vectorial real $V$ és una aplicació $g:V\times V\to\mathbb R$ que és bilineal, simètrica i definida positiva, és a dir, que verifica
    \begin{enumerate}
        \item $g(\alpha u + \beta v, w) = \alpha g(u,w) + \beta g(v,w)$ per a tot $u,v,w\in V$ i $\alpha,\beta\in\mathbb R$,
        \item $g(u,v) = g(v,u)$ per a tot $u,v\in V$,
        \item $g(u,u)\ge0$ per a tot $u\in V$,
        \item $g(u,u) = 0$ si i només si $u = 0$.
    \end{enumerate}
\end{defi}

\begin{defi}
    Sigui $M$ una varietat diferenciable. Anomenem \textbf{mètrica Riemanniana} en $M$ una aplicació $g$ que assigna a cada punt $p$ en $M$ un producte intern $g_p:M_p\times M_p\to\mathbb R$ tal que per qualsevol obert $U\subseteq M$, si $X,Y$ són camps vectorials diferenciables en $U$, aleshores la funció $g(X,Y):U\to\mathbb R$ donada per
    \begin{equation*}
        g(X,Y)(p) = g_p(X_{|p},Y_{|p}),
    \end{equation*}
    és diferenciable.
    
    Anomenem \textbf{varietat Riemanniana} a una varietat diferenciable dotada d'una mètrica Riemanniana.
\end{defi}
En un sistema de coordenades locals $(x^1,\dots,x^n)$, la mètrica Riemanniana es pot expressar com\footnote{Per l'última igualtat prenem la notació d'Einstein per als sumatoris.}
\begin{equation*}
    g = \sum_{i,j=1}^n g_{ij}dx^i\otimes dx^j := g_{ij}dx^idx^j,
\end{equation*}
on $g_{ij}$ són funcions diferenciables en $U$ i $dx^i$ són les 1-formes coordenades.

\begin{defi}
    Anomenem $1-$formes coordenades, $\set{dx^1,\dots,dx^n}$, a la base de $T_p^*M$ obtinguda dualitzant la base $\set{\frac{\partial}{\partial x^1},\dots,\frac{\partial}{\partial x^n}}$ de $T_pM$ en un sistema de coordenades $x^1,\dots,x^n$.
\end{defi}

\begin{defi}
    Anomenarem \textbf{mètrica euclidiana} en $\mathbb R^n$ la mètrica Riemanniana que en qualsevol sistema de coordenades tal que les coordenades siguin $x^1,\dots,x^n$ es pot expressar com
    \begin{equation*}
        \langle\cdot,\cdot\rangle := \delta_{ij}dx^idx^j,
    \end{equation*}
    on $\delta_{ij}$ és la delta de Kronecker.
\end{defi}

\begin{defi}\label{def:pullback_metric}
    Siguin $M$ i $N$ dues varietats Riemannianes, $g$ una mètrica Riemanniana en $N$ i $F:M\to N$ una aplicació diferenciable. Anomenem \textbf{pullback de $g$ per $F$} la mètrica Riemanniana $F^*g$ en $M$ tal que, per qualsevol parell de vectors tangents $u,v\in T_pM$,
    \begin{equation*}
        (F^*g)_p(v,u) = g_{F(p)}(dF_p(v),dF_p(u)),
    \end{equation*}
    on $dF_p$ és el diferencial de $F$ en $p$.
\end{defi}

\begin{prop}[\textbf{Existència de mètriques Riemannianes}]
    Tota varietat diferenciable suau admet una mètrica Riemanniana.
\end{prop}
{
    \color{green!50!black} \textit{Prova.}
    Sigui $M$ una varietat diferenciable suau. Sigui $\set{(U_\alpha,\varphi_\alpha)}$ un recobriment per cartes coordenades. En cada domini de carta, existeix una mètrica Riemanniana $g_\alpha = \varphi_\alpha^*\langle\cdot,\cdot\rangle = \delta_{ij}dx^idx^j$. Sigui $\set{\psi_\alpha}$ una partició de la unitat subordinada a $\set{U_\alpha}$. Definim 
    \begin{equation*}
        g = \sum_{\alpha} \psi_\alpha g_\alpha,
    \end{equation*}
    on els termes són zero fora dels suports de les $\psi_\alpha$. Com les particions de la unitat són localment finites, la suma és localment finita i per tant $g$ hereta la suavitat de les $g_\alpha$. És evidentment bilineal i simètrica per construcció, i només cal veure que és definida positiva.

    Sigui $v\in T_pM$ un vector tangent en $p\in M$ diferent de zero. Aleshores el producte intern definit en aquest punt és
    \begin{equation*}
        g_p(v,v) = \sum_\alpha \psi_\alpha(p) g_\alpha|_p(v,v)
    \end{equation*}
    que és una suma de termes no negatius. Com a mínim alguna de les $\psi_\alpha$ és positiva en $p$ i, per tant, $g_p(v,v) > 0$.
    \qed
}

\begin{defi}
    Siguin $(M,g)$ i $(\tilde M,\tilde g)$ dues varietats Riemannianes. Una aplicació $F: M\to \tilde M$ és una \textbf{isometria (Riemanniana)} si és un difeomorfisme i $F^*\tilde g = g$. Diem que $F$ és una \textbf{isometria local} si tot punt $p\in M$ té un entorn $U$ tal que $F|_U$ és una isometria d'un entorn de $F(p)$ en $\tilde M$. Si $F$ és una isometria, diem que $M$ i $\tilde M$ són \textbf{isomètriques}, i si $F$ és una isometria local, diem que $M$ i $\tilde M$ són \textbf{localment isomètriques}.
\end{defi}

Hi ha diverses propietats de les varietats Riemannianes que són invariants per isometries locals. La més important per nosaltres és la planor (en anglès, \textit{flatness}).
\begin{defi}\label{def:flatness}
    Diem que una varietat Riemanniana $(M,g)$ és \textbf{plana} si és localment isomètrica a l'espai euclidià $\mathbb R^n$ amb la mètrica euclidiana.
\end{defi}

Si $(M,g)$ és una varietat Riemanniana, qualsevol subvarietat diferenciable $S\subseteq M$ admet una \textbf{mètrica induïda} $\imath^*g$, on $\imath:S\hookrightarrow M$ és la inclusió.


\subsection{Un resultat interessant en $\mathbb R^3$}

En el cas de superfícies regulars en $\mathbb R^3$, l'espai normal tal com l'hem definit a la definició \ref{def:espai_normal} en qualsevol punt de la superfície és unidimensional. En general, el que ens interessarà d'aquest espai normal és la seva direcció, de manera que definim l'aplicació següent:
\begin{defi}
    Sigui $S$ una superfície regular. Anomenem \textbf{aplicació de Gauss} o \textbf{aplicació normal} de $S$ a una aplicació $N:S\to \mathbb S^2$ que a cada punt $p\in S$ li assigna un vector normal unitari a $S$ en $p$.
\end{defi}
Diem que $S$ és \textbf{orientable} si existeix una aplicació de Gauss $N$.
\begin{ex}
    La cinta de Möbius, donada per $S=\phi(\mathbb R \times (-1,1))$, on $\phi(u,v) = 2(\cos(2u), \sin(2u), 0) + v(\cos(u)\cos(2u), \cos(u)\sin(2u), \sin(u))$, és una superfície regular no orientable.
\end{ex}
Un dels resultats més rellevants pel que fa a l'orientació de superfícies regulars, que no demostrarem aquí, és el següent:
\begin{teo}
    Tota superfície regular compacta és orientable.
\end{teo}

El diferencial de l'aplicació de Gauss $N$ d'una superfície regular orientable $S$, $dN_p:T_pS\to T_{N(p)}\mathbb S^2$, es pot interpretar com un operador lineal del pla tangent a $S$ en si mateix, ja que el pla tangent a $\mathbb S^2$ en $N(p)$ és el mateix que el pla tangent a $S$ en $p$. Per veure això, només cal considerar que $T_{N(p)}\mathbb S^2 = N(p)^\perp = T_pS$. Per aquest motiu, denotem \textbf{endomorfisme de Weingarten} $W_p$ el diferencial de l'aplicació de Gauss quan és considerat com un endomorfisme de $T_pS$. Amb aquest endomorfisme, podem arribar a definir la curvatura d'una superfície regular orientada.

\begin{defi}
    Sigui $S$ una superfície regular orientada, $p$ un punt de $S$. Anomenem \textbf{segona forma fonamental} de $S$ en $p$ la forma bilineal
    \begin{align*}
        II_p:T_pS\times T_pS&\to\mathbb R\\
        (v,w)&\mapsto \langle W_p(v),w\rangle
    \end{align*}
    on $\langle\cdot,\cdot\rangle$ és el producte escalar euclidià en $T_pS$.
\end{defi}

\begin{defi}
    Sigui $S$ una superfície regular orientada, $p$ un punt de $S$. Anomenem \textbf{curvatura de Gauss} $\kappa_S(p)$ de $S$ en $p$ el determinant de l'endomorfisme de Weingarten $W_p$.
\end{defi}

Es pot demostrar, de fet, que l'endomorfisme de Weingarten diagonalitza amb valors propis reals $k_1$ i $k_2$, de manera que la curvatura de Gauss és
\begin{equation*}
    \kappa_S(p) = k_1(p)k_2(p).
\end{equation*}
Anomenem $k_1(p)$ i $k_2(p)$ les \textbf{curvatures principals} de $S$ en $p$, i els vectors propis corresponents a aquests valors propis s'anomenen \textbf{direccions principals de curvatura}. 
Anomenem \textbf{curvatura mitjana} en un punt $p$ d'una superfície regular el valor
\begin{equation}\label{eq:curvatura_mitjana}
    H(p) = \frac12 (k_1(p) + k_2(p))
\end{equation}
Localment, corbes sobre la superfície que passen per $p$ i segueixen les direccions principals de curvatura coincideixen amb cercles encabits a $\mathbb R^3$ tangents a aquest mateix punt i de radis $1/|k_1(p)|$ i $1/|k_2(p)|$.  La curvatura de Gauss és negativa quan els centres d'aquests cercles, que anomenem \textbf{centres de curvatura}, es troben en costats oposats del pla tangent, i positiva quan estan en el mateix costat.

\begin{defi}
    Sigui $S$ una superfície regular orientada, $p$ un punt de $S$. Diem que $p$ és un \textbf{punt el·líptic} si $\kappa_S(p) > 0$.
\end{defi}

Intuïtivament, una superfície regular és el·líptica en un punt si, localment, la superfície roman a un mateix costat del pla tangent, sense creuar-lo. 

\begin{teo}\label{teo:elliptic_point}
    Tota superfície regular compacta té un punt el·líptic.
\end{teo}
{
    \color{green!50!black}
    \textit{Prova.}
    Sigui $S$ una superfície regular compacta, i considerem l'aplicació 
    \begin{align*}
        g:S&\to\mathbb R\\
        p&\mapsto ||p||^2.
    \end{align*}
    Com $S$ és compacta i $g$ és una funció real contínua, $g$ assoleix un màxim en un punt $p_{\max}\in S$. Sigui $R^2 = ||p_{\max}||^2$ el valor màxim de $g$. 
    
    Com a $p_{\max}$ s'assoleix el màxim de la distància a l'origen, el vector posició $p_{\max}$ és ortogonal a la superfície en $p_{\max}$. És a dir, $p_{\max}$ és un punt comú de la superfície regular $S$ i la frontera de l'esfera $B_{R}(0)$, on els espais tangents a $S$ i $B_{R}(0)$ coincideixen. 
    %{\color{blue} crec que això és el que l'ignasi va quedar-se demostrant quan ho vam fer a classe}

    Tots els punts de $S$ tenen distància a l'origen menor que $R$, de manera que $S\subseteq B_{R}(0)$. Siguin $k_1$ i $k_2$ les curvatures principals de $S$ en $p_{\max}$, i $\alpha:[0,1]\to S$ i $\beta:[0,1]\to S$ corbes tangents a $S$ en $p_{\max}$ que corresponen a les direccions principals de curvatura. Les curvatures principals de l'esfera $B_{R}(0)$ en $p_{\max}$ són ambdues $1/R$ o ambdues $-1/R$, depenent de la orientació $N$ escollida. Escollim una orientació $N$ de $S$ tal que en $p_{\max}$ les curvatures principals de l'esfera siguin $1/R$. Aleshores, si alguna de les curvatures principals de $S$ és menor que $1/R$, la corba $\alpha$ o $\beta$ tindrà un radi de curvatura més gran que el de l'esfera, de manera que hi haurà un punt $\tilde p\in S$ proper a $p_{\max}$ que té distància a l'origen més gran que $R$. Això entra en contradicció amb el fet que la distància a l'origen de $p_{\max}$ és màxima. Per tant, ambdues curvatures principals de $S$ en $p_{\max}$ han de ser majors que $1/R$, i per tant $S$ té un punt el·líptic.
    \qed
}

A continuació enunciem un dels teoremes més importants de la geometria de corbes i superfícies regulars en $\mathbb R^3$, demostrat per Carl Friedrich Gauss el 1827, que relaciona la curvatura de Gauss d'una superfície regular amb la seva mètrica com a varietat Riemanniana.

\begin{teo}[Teorema Egregi de Gauss]
    La curvatura de Gauss d'una superfície regular només depèn de la mètrica de la superfície com a varietat Riemanniana. En concret, la curvatura de Gauss és invariant per isometries. 
\end{teo}

Un cas particular d'aquest teorema és que la planor tal com l'hem definit a la definició \ref{def:flatness}, que la mètrica d'una varietat Riemanniana sigui la mètrica euclidiana, és equivalent a que la curvatura de Gauss sigui nul·la. Això té una implicació a l'hora de determinar quines varietats Riemannianes bidimensionals es poden encabir de manera isomètrica en $\mathbb R^3$. En concret, obtenim el següent resultat per al tor pla. 

\begin{defi}
    Anomenem \textbf{tor} la varietat topològica $\mathbb T^2 = \mathbb R^2/\mathbb Z^2 = [0,1]\times[0,1]/\sim$, on $\sim$ és la relació d'equivalència tal que $(x,0)\sim(x,1)$ i $(0,y)\sim(1,y)$ per a tot $x,y\in[0,1]$. Anomenem \textbf{tor pla} la varietat Riemanniana $(\mathbb T^2, g)$ on $\mathbb T^2$ és el tor, i $g$ és la mètrica euclidiana.
\end{defi}

\begin{teo}
    No existeix cap encabiment isomètric $C^\infty$ del tor pla en $\mathbb R^3$.
\end{teo}
{
    \color{green!50!black}
    \textit{Prova.}
    Primer de tot, cal veure que el tor és un espai topològic compacte. En efecte, el tor és la imatge del quadrat $[0,1]\times[0,1]$ pel quocient $\pi:[0,1]\times[0,1]\to\mathbb T^2$. Com el quocient és una aplicació contínua i el quadrat és compacte, el tor és compacte.

    Sigui $f:\mathbb T^2\to\mathbb R^3$ un encabiment isomètric $C^\infty$ de $(\mathbb T^2, g)$, on $g$ és la mètrica euclidiana en $\mathbb R^2$. Com $f$ és un encabiment suau, $f(\mathbb T^2)$ és una superfície regular. A més,com $f$ és una aplicació contínua d'un espai topològic compacte, $f(\mathbb T^2)$ és compacte. Per tant, $f(\mathbb T^2)$ és una superfície regular compacta.

    Pel Teorema Egregi de Gauss, la curvatura de Gauss de $f(\mathbb T^2)$ és invariant per isometries, i només depèn de la mètrica $g$. Com $g$ és la mètrica euclidiana, la curvatura de Gauss de $f(\mathbb T^2)$ ha de ser idènticament zero. Ara bé, pel Teorema \ref{teo:elliptic_point}, $f(\mathbb T^2)$ té un punt el·líptic, i per tant la curvatura de Gauss no pot ser idènticament zero. Així doncs, no existeix cap encabiment isomètric $C^\infty$ del tor pla en $\mathbb R^3$.
    \qed
}



\newpage